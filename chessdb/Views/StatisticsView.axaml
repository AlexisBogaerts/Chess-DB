<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:chessdb.ViewModels"
             x:Class="chessdb.Views.StatisticsView"
             x:DataType="vm:StatisticsViewModel">

  <StackPanel Spacing="20" Margin="20">
    
    <!-- TEST SIMPLE: Affichage direct des valeurs -->
    <Border Background="White" 
            CornerRadius="8" 
            Padding="30"
            BoxShadow="0 2 8 0 #10000000">
      <StackPanel Spacing="15">
        <TextBlock Text="ðŸ§ª TEST DES STATISTIQUES" 
                   FontSize="24" 
                   FontWeight="Bold"/>
        
        <TextBlock FontSize="18">
          <Run Text="Total Joueurs: "/>
          <Run Text="{Binding TotalPlayers}" FontWeight="Bold"/>
        </TextBlock>
        
        <TextBlock FontSize="18">
          <Run Text="Total CompÃ©titions: "/>
          <Run Text="{Binding TotalCompetitions}" FontWeight="Bold"/>
        </TextBlock>
        
        <TextBlock FontSize="18">
          <Run Text="Total Parties: "/>
          <Run Text="{Binding TotalGames}" FontWeight="Bold"/>
        </TextBlock>
        
        <TextBlock FontSize="18">
          <Run Text="ELO Moyen: "/>
          <Run Text="{Binding AverageElo}" FontWeight="Bold"/>
        </TextBlock>
        
        <TextBlock FontSize="18">
          <Run Text="Meilleur Joueur: "/>
          <Run Text="{Binding TopPlayer.FirstName}" FontWeight="Bold"/>
          <Run Text=" "/>
          <Run Text="{Binding TopPlayer.LastName}" FontWeight="Bold"/>
          <Run Text=" ("/>
          <Run Text="{Binding TopPlayer.Elo}"/>
          <Run Text=")"/>
        </TextBlock>
        
        <TextBlock FontSize="18">
          <Run Text="Nombre de joueurs dans TopPlayers: "/>
          <Run Text="{Binding TopPlayers.Count}" FontWeight="Bold"/>
        </TextBlock>
        
        <Button Content="ðŸ”„ Actualiser" 
                Command="{Binding RefreshCommand}"
                HorizontalAlignment="Left"
                Background="#3498DB"
                Foreground="White"
                Padding="20,10"
                FontSize="16"/>
      </StackPanel>
    </Border>

    <!-- Liste simple des top joueurs -->
    <Border Background="White" 
            CornerRadius="8" 
            Padding="30"
            BoxShadow="0 2 8 0 #10000000">
      <StackPanel Spacing="15">
        <TextBlock Text="ðŸ… Top Joueurs" 
                   FontSize="20" 
                   FontWeight="Bold"/>
        
        <ItemsControl ItemsSource="{Binding TopPlayers}">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Border Padding="10" 
                      BorderBrush="#E0E0E0" 
                      BorderThickness="0,0,0,1"
                      Margin="0,5">
                <Grid ColumnDefinitions="Auto,*,Auto,Auto,Auto,Auto">
                  <TextBlock Grid.Column="0" 
                             Text="{Binding Rank}" 
                             FontWeight="Bold"
                             Width="40"/>
                  <TextBlock Grid.Column="1" 
                             Text="{Binding PlayerName}"/>
                  <TextBlock Grid.Column="2" 
                             Text="{Binding Elo}" 
                             Foreground="#3498DB"
                             FontWeight="Bold"
                             Margin="20,0,20,0"/>
                  <TextBlock Grid.Column="3" 
                             Text="{Binding Wins, StringFormat='V:{0}'}" 
                             Foreground="Green"
                             Margin="0,0,10,0"/>
                  <TextBlock Grid.Column="4" 
                             Text="{Binding Losses, StringFormat='D:{0}'}" 
                             Foreground="Red"
                             Margin="0,0,10,0"/>
                  <TextBlock Grid.Column="5" 
                             Text="{Binding Draws, StringFormat='N:{0}'}" 
                             Foreground="Gray"/>
                </Grid>
              </Border>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </StackPanel>
    </Border>

  </StackPanel>
</UserControl>